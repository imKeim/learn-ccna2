## Топология

![](./assets/topology.png)

## Таблица адресации

| Устройство | Интерфейс | IP адрес/префикс        |
|------------|-----------|-------------------------|
| **S1**     | VLAN 99   | 192.168.1.2 /24         |
| **S1**     | VLAN 99   | 2001:db8:acad:1::2 /64  |
| **S1**     | VLAN 99   | fe80::2                 |
| **PC-A**   | NIC       | 192.168.1.10 /24        |
| **PC-A**   | NIC       | 2001:db8:acad:1::10 /64 |

## Цели

Часть 1. Проверка конфигурации коммутатора по умолчанию

Часть 2. Создание сети и настройка основных параметров устройства

Часть 3. Проверка сетевых подключений

## Общие сведения/сценарий

На коммутаторах Cisco можно настроить особый IP-адрес, который называют виртуальным интерфейсом коммутатора (SVI). SVI или адрес управления можно использовать для удаленного доступа к коммутатору в целях отображения или настройки параметров. Если для SVI сети VLAN 1 назначен IP-адрес, то по умолчанию все порты в сети VLAN 1 имеют доступ к IP-адресу управления SVI.

В ходе данной лабораторной работы вам предстоит построить простую топологию, используя Ethernet-кабель локальной сети, и получить доступ к коммутатору Cisco, используя консольное подключение и методы удаленного доступа. Перед настройкой базовых параметров коммутатора нужно проверить настройки коммутатора по умолчанию. В число таких основных параметров коммутации входят имя устройства, описание интерфейса, локальные пароли, объявление дня (MOTD), IP-адрес и статический MAC-адрес. Вы также будете использовать управляющий IP-адрес для удаленного управления коммутатором. Топология состоит из одного коммутатора и двух хостов, использующих только Ethernet и консольные порты. Вы будете проверять сетевое подключение и управлять таблицей MAC-адресов с помощью двух конечных устройств.

## Инструкции

### Часть 1. Создание сети и проверка настроек коммутатора по умолчанию

В первой части лабораторной работы вам предстоит настроить топологию сети и проверить настройку коммутатора по умолчанию.

**Шаг 1. Создайте сеть согласно топологии.**

1.  На полке нажмите на коммутатор **S1** и поместите его на левую часть стола.

2.  На полке нажмите на устройство **PC-A** и поместите его на правую часть стола. Включите PC-A.

3.  Подключите консольный кабель от устройства **PC-A** к коммутатору **S1**, как показано в топологии. На данном этапе не подключайте кабель Ethernet компьютера PC-A.

4.  На вкладке **Desktop** компьютера PC-A используйте **terminal** для подключения к коммутатору.

    Вопрос: Почему нужно использовать консольное подключение для первоначальной настройки коммутатора? Почему нельзя подключиться к коммутатору через Telnet или SSH?

    **Введите ваш ответ здесь.**

**Шаг 2. Проверьте настройки коммутатора по умолчанию.**

На данном этапе вам нужно проверить такие параметры коммутатора по умолчанию, как текущие настройки коммутатора, данные IOS, свойства интерфейса, сведения о VLAN и флеш-память.

Вы можете получить доступ ко всем командам коммутатора IOS в привилегированном режиме EXEC. Доступ к привилегированному режиму нужно ограничить с помощью пароля, чтобы предотвратить неавторизованное использование устройства — через этот режим можно получить прямой доступ к режиму глобальной конфигурации и командам, используемым для настройки рабочих параметров. Вы установите пароли позже в этом задании.

К привилегированному набору команд относятся команды пользовательского режима, а также команда **configure**, при помощи которой выполняется доступ к остальным командным режимам. Введите команду **enable**, чтобы войти в привилегированный режим EXEC.

1.  Предполагая, что у коммутатора нет файла конфигурации, хранящегося в энергонезависимой памяти (NVRAM), при консольном подключении с использованием программы **Terminal**вы попадете в приглашение пользовательского режима EXEC на коммутаторе с приглашением **Switch\>**. Введите команду **enable**, чтобы войти в привилегированный режим EXEC.

    Обратите внимание, что измененная в конфигурации строка будет отражать привилегированный режим EXEC.

2.  Убедитесь, что на коммутаторе находится пустой файл конфигурации по умолчанию, с помощью команды **show running-config** привилегированного режима EXEC. Изучите текущий файл running configuration.

    Вопросы:

    Сколько интерфейсов GigabitEthernet имеет коммутатор?

    **Введите ваш ответ здесь.**

    Каков диапазон значений, отображаемых в vty-линиях?

    **Введите ваш ответ здесь.**

3.  Изучите файл загрузочной конфигурации (startup configuration), который содержится в энергонезависимом ОЗУ (NVRAM).

    ```
    Switch# show startup-config
    startup-config is not present
    ```

    Вопрос:

    Почему появляется это сообщение?

    **Введите ваш ответ здесь.**

4.  Изучите характеристики SVI для VLAN 1.

    ```
    Switch# show interface vlan1
    ```

    Вопросы:

    Назначен ли IP-адрес сети VLAN 1?

    **Введите ваш ответ здесь.**

    Какой MAC-адрес имеет SVI? Возможны различные варианты ответов.

    **Введите ваш ответ здесь.**

    Данный интерфейс включен?

    **Введите ваш ответ здесь.**

5.  Изучите IP-свойства интерфейса SVI сети VLAN 1.

    ```
    Switch# show ip interface vlan1
    ```

    Вопрос: Какие выходные данные вы видите?

    **Введите ваш ответ здесь.**

6.  Подключите кабель Ethernet от **PC-A** к GigabitEthernet1/0/6 на коммутаторе. Дождитесь согласования параметров скорости и дуплекса между коммутатором и ПК. Изучите IP-свойства интерфейса SVI сети VLAN 1.

    Вопрос: Какие выходные данные вы видите?

    **Введите ваш ответ здесь.**

7.  Войдите в глобальную конфигурацию и включите интерфейс SVI VLAN 1.

8.  Изучите IP-свойства интерфейса SVI сети VLAN 1.

    Вопрос: Какие выходные данные вы видите?

    **Введите ваш ответ здесь.**

9.  Изучите сведения о версии ОС Cisco IOS на коммутаторе.

    ```
    Switch# show version
    ```

    Вопросы:

    Под управлением какой версии ОС Cisco IOS работает коммутатор?

    **Введите ваш ответ здесь.**

    Как называется файл образа системы?

    **Введите ваш ответ здесь.**

    Какой базовый Ethernet MAC-адрес назначен коммутатору?

    **Введите ваш ответ здесь.**

10. Изучите свойства по умолчанию интерфейса GigabitEthernet1/0/6 используемого PC-A.

    ```
    Switch# show interface gig1/0/6
    ```

    Вопросы:

    Интерфейс включен или выключен?

    **Введите ваш ответ здесь.**

    Что нужно сделать, чтобы включить интерфейс?

    **Введите ваш ответ здесь.**

    Какой MAC-адрес у интерфейса?

    **Введите ваш ответ здесь.**

    Какие настройки скорости и дуплекса заданы в интерфейсе?

    **Введите ваш ответ здесь.**

11. Изучите параметры сети VLAN по умолчанию на коммутаторе.

    ```
    Switch# show vlan
    ```

    Вопросы:

    Какое имя присвоено сети VLAN 1 по умолчанию?

    **Введите ваш ответ здесь.**

    Какие порты расположены в сети VLAN 1?

    **Введите ваш ответ здесь.**

    Активна ли сеть VLAN 1?

    **Введите ваш ответ здесь.**

    К какому типу сетей VLAN принадлежит VLAN по умолчанию?

    **Введите ваш ответ здесь.**

12. Изучите флеш-память.

    Выполните одну из следующих команд, чтобы изучить содержимое флеш-каталога.

    ```
    Switch# show flash:
    Switch# dir flash:
    ```

    В конце имени файла указано расширение, например .bin. Каталоги не имеют расширения файла.

    Вопрос: Какое имя присвоено образу Cisco IOS?

    **Введите ваш ответ здесь.**

### Часть 2. Настройка базовых параметров сетевых устройств

Во второй части необходимо будет настроить основные параметры коммутатора и компьютера.

**Шаг 1. Настройте базовые параметры коммутатора.**

1.  В режиме глобальной конфигурации скопируйте следующие базовые параметры конфигурации и вставьте их в конфигурацию на коммутаторе **S1**.

    ```
    no ip domain-lookup
    hostname S1
    service password-encryption
    enable secret class
    banner motd #
    Unauthorized access is strictly prohibited. #
    ```

2.  Назначьте IP-адрес интерфейсу SVI на коммутаторе. Благодаря этому вы получите возможность удаленного управления коммутатором.

    Прежде чем вы сможете управлять коммутатором **S1** удаленно с компьютера **PC-A**, коммутатору нужно назначить IP-адрес. Согласно конфигурации по умолчанию коммутатором можно управлять через VLAN 1. Однако в базовой конфигурации коммутатора не рекомендуется назначать VLAN 1 в качестве административной VLAN.

    Для административных целей используйте VLAN 99. Выбор VLAN 99 является случайным, поэтому вы не обязаны использовать VLAN 99 всегда.

    Итак, для начала создайте на коммутаторе новую VLAN 99. Затем настройте IP-адрес коммутатора на 192.168.1.2 с маской подсети 255.255.255.0 на внутреннем виртуальном интерфейсе (SVI) VLAN 99. IPv6-адрес также можно настроить на интерфейсе SVI. Настройте IPv6-адреса для маршрутизаторов в соответствии с **таблицей адресации**.

    Обратите внимание, что интерфейс VLAN 99 выключен, несмотря на то что вы ввели команду **no shutdown**. В настоящее время интерфейс выключен, поскольку сети VLAN 99 не назначены порты коммутатора.

3.  Ассоциируйте все пользовательские порты с VLAN 99.

    Чтобы установить подключение между узлом и коммутатором, порты, используемые узлом, должны находиться в той же VLAN, что и коммутатор. Через несколько секунд VLAN 99 включится, потому что как минимум один активный порт (F0/6, к которому подключен компьютер **PC-A**) назначен сети VLAN 99.

4.  Чтобы убедиться, что все порты находятся в сети VLAN 99, выполните команду **show vlan brief**.

5.  Настройте шлюз по умолчанию для коммутатора **S1**. Если не настроен ни один шлюз по умолчанию, коммутатором нельзя управлять из удаленной сети, на пути к которой имеется более одного маршрутизатора. Хотя в этом упражнении не учитывается внешний IP-шлюз, представьте, что впоследствии вы подключите LAN к маршрутизатору для обеспечения внешнего доступа. При условии, что интерфейс LAN маршрутизатора равен 192.168.1.1, настройте шлюз по умолчанию для коммутатора.

6.  Доступ через порт консоли также следует ограничить с помощью пароля. Используйте **cisco** в качестве пароля для входа в консоль в этом задании. Конфигурация по умолчанию разрешает все консольные подключения без пароля. Чтобы консольные сообщения не прерывали выполнение команд, используйте параметр **logging synchronous**.

    ```
    S1(config)# line con 0
    S1(config-line)# logging synchronous
    ```

7.  Настройте каналы виртуального соединения для удаленного управления (vty), чтобы коммутатор разрешил доступ через Telnet. Если не настроить пароль VTY, будет невозможно подключиться к коммутатору по протоколу Telnet.

    Вопрос: Для чего нужна команда **login**?

    **Введите ваш ответ здесь.**

**Шаг 2. Настройте IP-адрес на компьютере PC-A.**

Назначьте компьютеру IP-адрес и маску подсети в соответствии с **таблицей адресации**. Здесь описана сокращенная версия данной операции. Для рассматриваемой топологии не требуется шлюз по умолчанию. Однако вы можете ввести адрес **192.168.1.1** и **fe80::1** чтобы смоделировать маршрутизатор, подключенный к коммутатору **S1**.

1.  Перейдите во вкладку **Desktop**.

2.  Щелкните **IP Configuration** (Настройка IP-адресов).

3.  Убедитесь, что выбрана радио-кнопка **Static** в разделе IP Configuration.

4.  Введите адрес IPv4, маску подсети и шлюз по умолчанию.

5.  Убедитесь, что выбрана радио-кнопка **Static** в разделе IPv6 Configuration.

6.  Введите IPv6-адрес, префикс и шлюз по умолчанию

7.  Нажав **Х** закройте окно **IP Configuration** (Настройка IP-адреса).

### Часть 3. Проверка сетевых подключений

В части 3 лабораторной работы вам предстоит проверить и задокументировать конфигурацию коммутатора, протестировать сквозное соединение между компьютером **PC-A** и коммутатором **S1**, а также протестировать возможность удаленного управления коммутатором.

**Шаг 1. Отобразите конфигурацию коммутатора.**

Используйте консольное подключение на компьютере **PC-A** для отображения и проверки конфигурации коммутатора. Команда **show run** позволяет постранично отобразить всю текущую конфигурацию. Для пролистывания используйте клавишу пробела.

1.  Пример конфигурации приведен ниже. Параметры, которые вы настроили, выделены желтым. Другие параметры конфигурации — значения IOS по умолчанию.

    ```
    S1# show run
    Building configuration...

    Current configuration : 2424 bytes
    !
    version 16.3.2
    service timestamps debug datetime msec
    service timestamps log datetime msec
    service password-encryption
    !
    hostname S1
    !
    enable secret 5 $1$mERr$9cTjUIEqNGurQiFU.ZeCi1!
    no ip cef
    no ipv6 cef
    !
    !
    no ip domain-lookup
    !
    <output omitted>
    !
    interface GigabitEthernet1/0/6
    switchport access vlan 99
    !  
    <output omitted>
    !
    interface GigabitEthernet1/0/24
    switchport access vlan 99
    !
    <output omitted>
    !
    interface Vlan1
    no ip address
    shutdown
    !
    interface Vlan99  
    mac-address 00e0.f795.d201
    ip address 192.168.1.2 255.255.255.0
    ipv6 address FE80::2 link-local
    ipv6 address 2001:DB8:ACAD:1::2/64
    !
    ip default-gateway 192.168.1.1
    ip classless
    !
    banner motd ^C
    Unauthorized access is strictly prohibited. ^C
    !
    line con 0
    password 7 0822455D0A16
    logging synchronous
    login
    line vty 0 4
    password 7 0822455D0A16
    login
    line vty 5 15
    password 7 0822455D0A16
    login
    !
    end
    ```

2.  Проверьте параметры административной VLAN 99.

    ```
    S1# show interface vlan 99
    ```

    Вопросы:

    Какова полоса пропускания этого интерфейса?

    **Введите ваш ответ здесь.**

    В каком состоянии находится VLAN 99?

    **Введите ваш ответ здесь.**

    В каком состоянии находится канальный протокол?

    **Введите ваш ответ здесь.**

**Шаг 2. Протестируйте сквозное соединение, отправив эхо-запрос.**

Убедитесь, что PC-A может связаться с IPv4 и IPv6-адресом коммутатора S1.

```
C:\> ping 192.168.1.2
C:\> ping 2001:db8:acad:1::2
```

Поскольку компьютеру **PC-A** нужно преобразовать МАС-адрес коммутатора **S1** с помощью ARP, время ожидания передачи первого пакета может истечь. Если эхо-запрос не удается, найдите и устраните неполадки базовых настроек устройства. Проверьте как физические кабели, так и логическую адресацию.

**Шаг 3. Проверьте удаленное управление коммутатором S1.**

После этого используйте удаленный доступ к устройству с помощью Telnet. В этой лабораторной работе устройства **PC-A** и **S1** расположены рядом. В производственной сети коммутатор может находиться в коммутационном шкафу на последнем этаже, в то время как административный компьютер находится на первом этаже. На данном этапе вам предстоит использовать Telnet для удаленного доступа к коммутатору **S1** через его административный адрес SVI. Telnet — это не безопасный протокол, но вы можете использовать его для проверки удаленного доступа. С помощью Telnet вся информация, включая пароли и команды, отправляется в виде открытого текста. В последующих лабораторных работах вы будете использовать протокол SSH для удаленного доступа к сетевым устройствам.

1.  Откройте вкладку **Desktop** на **PC-A**.

2.  Прокрутите список приложений вниз и щелкните **Telnet/SSH Client.**

3.  Установите для параметра **Connection Type** в значение **Telnet.**

4.  Введите адрес управления SVI для подключения к S1 и нажмите кнопку **Connect**.

5.  После ввода пароля **cisco** вы окажетесь в командной строке пользовательского режима. Для перехода в исполнительский режим EXEC введите команду **enable** и используйте секретный пароль **class**.

6.  Сохраните конфигурацию.

7.  Чтобы завершить сеанс Telnet, введите **exit**. Нажмите **No** во всплывающем окне.

**Шаг 4. Разверните коммутатор S1 в производственной сети.**

Теперь вы установите коммутатор **S1** в производственную сеть и отсоедините кабель консоли. Telnet будет использоваться для удаленного доступа к коммутатору и завершения любой дополнительной настройки и проверки. В последующих лабораторных работах вы будете использовать протокол SSH для удаленного доступа к сетевым устройствам.

1.  Переместите коммутатор **S1** в стойку **Rack**.

2.  Нажмите правой кнопкой мыши на коммутатор **S1** и выберите **Inspect Rear**.

3.  Нажмите на **консольный кабель** и перетащите его на **peg board**.

## Вопросы для повторения

1.  Зачем необходимо настраивать пароль VTY для коммутатора?

    **Введите ваш ответ здесь.**

2.  Зачем нужно изменять VLAN 1 по умолчанию на сеть VLAN с другим номером?

    **Введите ваш ответ здесь.**

3.  Как вы можете предотвратить отправку паролей в открытом тексте?

    **Введите ваш ответ здесь.**

[Скачать файл Packet Tracer для локального запуска](./assets/1.1.7-packet-tracer---basic-switch-configuration---physical-mode_ru-RU.pka)