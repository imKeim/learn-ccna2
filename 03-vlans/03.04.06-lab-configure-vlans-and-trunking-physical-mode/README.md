
---

> **ВАЖНО**
> 
> Форма для ответов на вопросы будет доступна только при развертывании лабораторной работы 

---

## Топология

![](./assets/topology.png)

## Таблица адресации

| Устройство | Интерфейс | IP-адрес     | Маска подсети | Шлюз по умолчанию |
|------------|-----------|--------------|---------------|-------------------|
| **S1**     | VLAN 1    | 192.168.1.11 | 255.255.255.0 | —                 |
| **S2**     | VLAN 1    | 192.168.1.12 | 255.255.255.0 | —                 |
| **PC-A**   | NIC       | 192.168.10.3 | 255.255.255.0 | 192.168.10.1      |
| **PC-B**   | NIC       | 192.168.10.4 | 255.255.255.0 | 192.168.10.1      |

## Задачи

Часть 1. Создание сети и настройка основных параметров устройства

Часть 2. Создание сетей VLAN и назначение портов коммутатора

Часть 3. Поддержка назначения портов VLAN и базы данных VLAN

Часть 4. Настройка магистрального канала стандарта 802.1Q между коммутаторами

## Общие сведения/сценарий

В целях повышения производительности сети большие широковещательные домены 2-го уровня делят на домены меньшего размера. Для этого современные коммутаторы используют виртуальные локальные сети (VLAN). Также сети VLAN можно использовать для определения узлов, между которыми возможен обмен данными, что позволяет повысить уровень безопасности. Сети VLAN облегчают процесс проектирования сети, обеспечивающей помощь в достижении целей организации.

Транковые каналы сети VLAN используются для распространения сетей VLAN по различным устройствам. Транковые каналы разрешают передачу трафика из множества сетей VLAN через один канал, не нанося вред идентификации и сегментации сети VLAN.

В этой лабораторной работе в режиме симмуляции физического оборудования вы создадите VLAN на обоих коммутаторах в топологии, назначите VLAN для коммутации портов доступа, убедитесь, что VLAN работают должным образом. Затем между двумя коммутаторами будет создана магистраль VLAN, чтобы разрешить узлам в одной VLAN взаимодействовать через магистраль, независимо от того, к какому коммутатору подключен узел.

## Инструкции

### Часть 1. Создание сети и настройка основных параметров устройства

В первой части лабораторной работы вам предстоит создать топологию сети и настроить базовые параметры для узлов ПК и коммутаторов.

**Шаг 1. Подключите кабели сети согласно приведенной топологии.**

Подключите устройства, как показано в топологии, и подсоедините необходимые кабели.

1.  Нажмите на коммутаторы **S1** и **S2** и перетащите их стойку **Rack**.

    Примечание. Это задание откроется с процентом выполнения - 37%, так как все порты коммутатора выключены. При установке коммутаторов в стойку порты будут автоматически активированы. Примерно через минуту счет упадет до 1%. Позже в задании вы отключите неиспользуемые порты.

2.  Нажмите на **PC-A** и **PC-B** и перетащите их на стол **Table**, используйте кнопку питания, чтобы включить их.

3.  Обеспечьте сетевое подключение путем подключения **Copper Straight-through** кабелей, как показано в топологии.

4.  Подключите **Console Cable** от устройства **PC-A** к **S1** и от устройства **PC-B** к **S2**.

**Шаг 2. Настройте базовые параметры каждого коммутатора.**

1.  На вкладке **Desktop** на каждом ПК используйте приложение **Terminal** для консольного соединения с каждым коммутатором и перейдите в привилегированный режим EXEC.

2.  Войдите в режим конфигурации.

3.  Назначьте коммутатору имя устройства.

4.  Назначьте **class** в качестве зашифрованного пароля привилегированного режима EXEC.

5.  Назначьте **cisco** в качестве пароля консоли и включите вход в систему по паролю.

6.  Установите **cisco** в качестве пароля виртуального терминала и активируйте вход.

7.  Зашифруйте открытые пароли.

8.  Создайте баннер с предупреждением о запрете несанкционированного доступа к устройству.

9.  Настройте на коммутаторе IP-адрес, указанный в таблице адресации для сети VLAN 1.

    **Примечание**: Адресация VLAN 1 не оценивается, так как вы удалите ее позже в задании. Однако для проверки подключения позже в этой части потребуется VLAN 1.

10. Выключите все интерфейсы, которые не будут использоваться.

11. Установите часы на коммутаторе.

    **Примечание**. Настройка часов не оценивается в Packet Tracer.

12. Сохраните текущую конфигурацию в файл загрузочной конфигурации.

**Шаг 3. Настройте узлы ПК.**

На вкладке **Desktop** на каждом **PC** щелкните IP Configuration и введите сведения об адресации, отображаемые в таблице адресации.

**Шаг 4. Проверьте связь.**

Проверьте сетевое подключение, по пытаясь выполнить эхо-запрос между каждым из связанных устройств.

Вопросы:

- ответьте на вопрос №1

- ответьте на вопрос №2

- ответьте на вопрос №3

- ответьте на вопрос №4

- ответьте на вопрос №5

### Часть 2. Создание сетей VLAN и назначение портов коммутатора

Во второй части лабораторной работы вам необходимо создать сети VLAN для учащихся, преподавателей и руководства на обоих коммутаторах. **Management**, **Operations**, **Parking_Lot** и **Native**. Затем вам нужно назначить сети VLAN соответствующему интерфейсу. Для проверки параметров конфигурации используйте команду **show vlan**.

**Шаг 1. Создайте сети VLAN на коммутаторах.**

На вкладке **Desktop** на каждом **PC**используйте терминал для продолжения настройки обоих сетевых коммутаторов.

Откройте окно конфигурации

1.  Создайте сети VLAN на коммутаторе **S1**.

    ```
    S1(config)# vlan 10
    S1(config-vlan)# name Operations
    S1(config-vlan)# vlan 20
    S1(config-vlan)# name Parking_Lot
    S1(config-vlan)# vlan 99
    S1(config-vlan)# name Management
    S1(config-vlan)# vlan 1000
    S1(config-vlan)# name Native
    S1(config-vlan)# end
    ```

2.  Создайте такую же сеть VLAN на коммутаторе **S2**.

3.  Выполните команду **show vlan**, чтобы просмотреть список сетей VLAN на коммутаторе **S1**.

    ```
    S1# show vlan brief

    VLAN Name Status Ports
    ---- -------------------------------- --------- -------------------------------
    1 default active Fa0/1, Fa0/2, Fa0/3, Fa0/4
    Fa0/5, Fa0/6, Fa0/7, Fa0/8
    Fa0/9, Fa0/10, Fa0/11, Fa0/12
    Fa0/13, Fa0/14, Fa0/15, Fa0/16
    Fa0/17, Fa0/18, Fa0/19, Fa0/20
    Fa0/21, Fa0/22, Fa0/23, Fa0/24
    Gi0/1, Gi0/2
    10 Operations active
    20 Parking_Lot active
    99 Management active
    1000 Native active
    1002 fddi-default active
    1003 token-ring-default active
    1004 fddinet-default active
    1005 trnet-default active
    ```

    Вопросы:

    - ответьте на вопрос №6

    - ответьте на вопрос №7

**Шаг 2. Назначьте сети VLAN соответствующим интерфейсам коммутатора.**

1.  Назначьте сети VLAN интерфейсам на коммутаторе **S1**.

    1.  Назначьте узел PC-A сети VLAN Operation.

        ```
        S1(config)# interface f0/6
        S1(config-if)# switchport mode access
        S1(config-if)# switchport access vlan 10
        ```

    2.  Из VLAN 1 удалите IP-адрес управления и настройте его на VLAN 99.

        ```
        S1(config)# interface vlan 1
        S1(config-if)# no ip address
        S1(config-if)# interface vlan 99
        S1(config-if)# ip address 192.168.1.11 255.255.255.0
        S1(config-if)# end
        ```

2.  Выполните команду **show vlan brief**, чтобы убедиться, что сети VLAN назначены правильным интерфейсам.

3.  Выполните команду **show ip interfaces brief**.

    - ответьте на вопрос №8

4.  Назначьте узел **PC-B** сети VLAN **Operation** на коммутаторе **S2**.

5.  Из VLAN 1 удалите IP-адрес управления и настройте его на VLAN 99 в соответствии с таблицей адресации.

6.  Выполните команду **show vlan brief**, чтобы убедиться, что сети VLAN назначены правильным интерфейсам.

    Вопросы:

    - ответьте на вопрос №9

    - ответьте на вопрос №10

### Часть 3. Поддержка назначения портов VLAN и базы данных VLAN

В третьей части лабораторной работы вам предстоит изменить назначения сети VLAN портам и удалить сети VLAN из базы данных VLAN.

**Шаг 1. Назначьте сеть VLAN нескольким интерфейсам.**

На вкладке **Desktop** на каждом **PC** используйте **Terminal** для продолжения настройки обоих сетевых коммутаторов.

Откройте окно конфигурации

1.  На коммутаторе **S1** назначьте интерфейсы F0/11 – 24 сети VLAN 99.

    ```
    S1(config)# interface range f0/11-24
    S1(config-if-range)# switchport mode access
    S1(config-if-range)# switchport access vlan 99
    S1(config-if-range)# end
    ```

2.  Чтобы проверить настройку VLAN, выполните команду **show vlan brief**.

3.  Заново назначьте порты F0/11 и F0/21 сети VLAN 10.

4.  Убедитесь, что назначения сети VLAN настроены верно.

**Шаг 2. Удалите назначение VLAN из интерфейса.**

1.  Используйте команду **no switchport access vlan**, чтобы удалить назначение сети VLAN 10 для F0/24.

    ```
    S1(config)# interface f0/24
    S1(config-if)# no switchport access vlan
    S1(config-if)# end
    ```

2.  Убедитесь, что это изменение сети VLAN вступило в силу.

    - ответьте на вопрос №11

**Шаг 3. Удалите идентификатор VLAN из базы данных VLAN.**

1.  Добавьте сеть VLAN 30 в интерфейс F0/24, не вводя команду сети VLAN.

    ```
    S1(config)# interface f0/24
    S1(config-if)# switchport access vlan 30
    % Access VLAN does not exist. Creating vlan 30
    ```

    **Примечание**. Чтобы добавить сеть VLAN в базу данных, на современных коммутаторах больше не нужно выполнять команду **vlan**. Когда порту назначается неизвестная сеть VLAN, эта сеть VLAN добавляется в базу данных.

2.  Убедитесь, что новая сеть VLAN отображается в таблице VLAN.

    - ответьте на вопрос №12

3.  Используйте команду **vlan 30**, чтобы удалить сеть VLAN 30 из базы данных VLAN.

    ```
    S1(config)# no vlan 30
    S1(config)# end
    ```

4.  Выполните команду **show vlan brief**. Порт F0/24 было назначен сети VLAN 30.

    - ответьте на вопрос №13

5.  Выполните команду **no switchport access vlan** на интерфейсе F0/24.

6.  Выполните команду **show vlan brief**, чтобы определить назначение сети VLAN для F0/24.

    Вопросы:

    - ответьте на вопрос №14

    **Примечание.** Прежде чем удалять сеть VLAN из базы данных, рекомендуется переназначить все порты, назначенные для этой сети VLAN.

    - ответьте на вопрос №15

### Часть 4. Конфигурация магистрального канала стандарта 802.1Q между коммутаторами

В четвертой части лабораторной работы вам необходимо настроить интерфейс F0/1 для использования протокола динамического создания магистрального канала (DTP), чтобы он мог согласовываться с магистральным режимом. После выполнения и проверки настройки вам нужно будет отключить DTP на интерфейсе F0/1 и вручную настроить его в качестве магистрального канала.

**Шаг 1. Для создания магистральной связи на порте F0/1 используйте протокол DTP.**

По умолчанию протокол DTP на порте коммутатора 2960 настроен на динамический автоматический режим. Благодаря этому интерфейс может преобразовать канал в магистральный канал, если соседний интерфейс настроен на магистральный или динамический рекомендуемый режим.

Откройте окно конфигурации

1.  Настройте порт **F0/1** на коммутаторе **S1** для согласования магистрального режима.

    ```
    S1(config)# interface f0/1
    S1(config-if)# switchport mode dynamic desirable
    Sep 19 02:51:47.257: %LINEPROTO-5-UPDOWN: Line protocol on Interface FastEthernet0/1, changed state to up
    Sep 19 02:51:47.291: %LINEPROTO-5-UPDOWN: Line protocol on Interface Vlan99, changed state to up
    ```

    Кроме того, на коммутаторе **S2** должны быть получены сообщения о состоянии соединения.

    ```
    S2#
    Sep 19 02:42:19.424: %LINK-3-UPDOWN: Interface FastEthernet0/1, changed state to up
    Sep 19 02:42:21.454: %LINEPROTO-5-UPDOWN: Line protocol on Interface Vlan99, changed state to up
    Sep 19 02:42:22.419: %LINEPROTO-5-UPDOWN: Line protocol on Interface FastEthernet0/1, changed state to up
    ```

2.  На коммутаторах **S1** и **S2** выполните команду **show vlan brief**. Интерфейс F0/1 больше не назначен сети VLAN 1. Транковые интерфейсы не указаны в таблице VLAN.

3.  Для просмотра магистральных интерфейсов выполните команду **show interfaces trunk**. Обратите внимание, что на коммутаторе **S1** настроен рекомендуемый(desirable) режим, а на **S2** настроен автоматический (auto) режим.

    ```
    S1# show interfaces trunk

    S2# show interfaces trunk
    ```

    **Примечание**. По умолчанию доступ в магистральный канал разрешен для всех сетей VLAN. С помощью команды **switchport trunk** вы можете определить, какие сети VLAN имеют доступ к магистральному каналу. Для этого задания сохраните настройки по умолчанию. Это позволяет всем VLAN проходить через F0/1.

4.  Убедитесь в том, что трафик сети VLAN проходит через магистральный интерфейс F0/1.

    Вопросы:

    - ответьте на вопрос №16

    - ответьте на вопрос №17

    - ответьте на вопрос №18

    - ответьте на вопрос №19

    - ответьте на вопрос №20

**Шаг 2. Вручную настройте магистральный интерфейс F0/1.**

Команда **switchport mode trunk** позволяет вручную настроить порт в качестве магистрального канала. Эту команду следует выполнять на обоих концах канала.

1.  Измените режим порта коммутатора на интерфейсе F0/1, чтобы принудительно создать магистральную связь. Не забудьте сделать это на обоих коммутаторах.

    ```
    S1(config)# interface f0/1
    S1(config-if)# switchport mode trunk
    ```

2.  Для просмотра магистрального режима выполните команду **show interfaces trunk**. Обратите внимание, что режим изменен с **desirable** (рекомендуемый) на **on** (вкл.).

    ```
    S1# show interfaces trunk
    ```

3.  Измените конфигурацию магистрали на обоих коммутаторах, изменив собственную (**native**) VLAN с VLAN 1 на VLAN 1000.

    ```
    S1(config)# interface f0/1
    S1(config-if)# switchport trunk native vlan 1000
    ```
 

4.  Для просмотра магистрального режима выполните команду **show interfaces trunk**. Обратите внимание, что обновлена информация о **native** VLAN.

    ```
    S2# show interfaces trunk
    ```

    Вопросы:

    - ответьте на вопрос №21

    - ответьте на вопрос №22

## Вопросы для повторения

- ответьте на вопрос №23

- ответьте на вопрос №24

[Скачать файл Packet Tracer для локального запуска](./assets/3.4.6-lab.pka)