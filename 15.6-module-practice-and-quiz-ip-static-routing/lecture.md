# Практика и контрольная работа модуля Статическая IP-маршрутизация

<!-- 15.6.1 -->
## Packet Tracer - Настройка статических и маршрутов по умолчанию IPv4 и IPv6
В этом фианльном задании Packet Tracer вы будете настраивать статические, стандартные и плавающие статические маршруты для протоколов IPv4 и IPv6.

[Открыть описание в PDF](./assets/15.6.1-packet-tracer---configure-ipv4-and-ipv6-static-and-default-routes_ru-RU.pdf)

[Скачать файл для Packet Tracer](./assets/15.6.1-packet-tracer---configure-ipv4-and-ipv6-static-and-default-routes_ru-RU.pka)

<!--15.6.2-->
## Лабораторная работа. Настройка статических маршрутов и маршрутов IPv4 и IPv6 по умолчанию
В этой лабораторной работе вы выполните следующие задачи.

- Часть 1: Создание сети и настройка основных параметров устройства
- Часть 2: Настройка и проверка IP-адресации и IPv6 на R1 и R2
- Часть 3: Настройка и проверка статических маршуртов и маршрутов по умолчанию для IPv4 на R1 и R2
- Часть 4: Настройка и проверка статических маршуртов и маршрутов по умолчанию для IPv6 на R1 и R2

[Открыть описание в PDF](./assets/15.6.2-lab---configure-ipv4-and-ipv6-static-and-default-routes_ru-RU.pdf)

<!--15.6.3-->
## Что я изучил в этом модуле?
**Статические маршруты**

Статические маршруты можно настроить для IPv4 и IPv6. Оба протокола поддерживают следующие типы статических маршрутов: стандартный статический маршрут, статический маршрут по умолчанию, плавающий статический маршрут и суммарный статический маршрут. Статические маршруты настраиваются с помощью команды глобальной конфигурации ip route. При настройке статического маршрута следующий переход может быть идентифицирован по IP-адресу, интерфейсу выхода или использовать оба варианта. При указании места назначения создается один из трех следующих типов статических маршрутов: следующий переход, непосредственно связанный и полностью указанный. Статические маршруты IPv4 настраиваются с помощью следующей команды глобальной конфигурации: **ip route** *network-address subnet-mask {ip-address | exit-intf [ip=address]}* **[distance]**. Статические маршруты IPv6 настраиваются с помощью следующей команды глобальной конфигурации: **ipv6 route** *ipv6-prefix/prefix-length {ipv6-address | exit-intf [ipv6-address]}* **[distance]**. Для просмотра таблицы маршрутизации IPv4 используется команда **show ip route | begin Gateway**. Для просмотра таблицы маршрутизации IPv6 используется команда **show ipv6 route | begin C**.

**Настройка статических маршрутов для пересылки IP-пакетов**

В статическом маршруте следующего перехода указывается только IP-адрес следующего перехода. Выходной интерфейс определяется исходя из следующего транзитного участка. При настройке статического маршрута также можно использовать выходной интерфейс для настройки адреса следующего перехода. Непосредственно подключенные статические маршруты следует использовать только с последовательными интерфейсами «точка-точка». В полностью заданном статическом маршруте указываются как выходной интерфейс, так и IP-адрес следующего перехода. Такой статический маршрут используется в случаях, когда выходной интерфейс представляет собой интерфейс множественного доступа и необходимо явно определить следующий переход. Следующий переход должен быть напрямую подключен к указанному выходному интерфейсу. В полностью заданном статическом маршруте указываются как выходной интерфейс, так и IPv6-адрес следующего перехода. Наряду с командами show ip route, show ipv6 route, ping и traceroute, другие полезные команды для проверки статических маршрутов включают в себя: **show ip route static**, **show ip route *network* show running-config | section ip route**. Замените ip на ipv6 для версий команды IPv6.

**Настройка статических марщрутов для пересылки IP-пакетов по умолчанию**

Статический маршрут по умолчанию — это маршрут, которому соответствуют все пакеты. Маршрут по умолчанию не требует совпадения никаких самых левых битов между маршрутом по умолчанию и IP адресом назначения. Статические маршруты по умолчанию обычно используются при подключении пограничного маршрутизатора к сети поставщика услуг и заглушному маршрутизатору. Как показано на рисунке, синтаксис команды для статического маршрута по умолчанию аналогичен синтаксису команды для любого другого статического маршрута за исключением того, что адрес сети указывается как 0.0.0.0, а маска подсети – 0.0.0.0. 0.0.0.0 0.0.0.0 в маршруте будет соответствовать любому сетевому адресу. Как показано на рисунке, синтаксис команд для статического маршрута по умолчанию похож на синтаксис команд для любого другого маршрута, за исключением того, что для параметра ipv6-prefix/prefix-length задано значение Чтобы проверить статический маршрут IPv4 по умолчанию, используйте команду **show ip route static**. Для IPV6 используйте команду **show ipv6 route static**.

**Настройка плавающих статических маршрутов**

Плавающие статические маршруты — это статические маршруты, используемые для предоставления резервного пути основному статическому маршруту или динамическому маршруту на случай сбоя в работе канала. Для этой цели плавающий статический маршрут настраивается с более высоким значением административного расстояния, чем основной маршрут. По умолчанию статические маршруты имеют значение административного расстояния, равное 1, поэтому они имеют приоритет перед маршрутами, полученными от протоколов динамической маршрутизации. Административные расстояния некоторых общих протоколов динамической маршрутизации внутренних шлюзов являются EIGRP = 90, OSPF = 110 и IS-IS = 115. Плавающие статические маршруты IP настраиваются с помощью аргумента **distance** для указания административного расстояния. Если значение административного расстояния не задано, используется значение по умолчанию (1). Команды **show ip route** и **show ipv6 route** показывает, что маршрут по умолчанию к маршрутизатору записан в таблицу маршрутизации.

**Настройка статических маршрутов хостов**

Маршрут хоста представляет собой адрес IPv4 с 32-разрядной маской или адрес IPv6 с 128-разрядной маской. Существует три способа добавления маршрута узла в таблицу маршрутизации: автоматически устанавливается, когда IP-адрес настроен на маршрутизаторе, настроен как статический маршрут узла, или автоматически получается с помощью других методов, не охваченных этим модулем. Cisco IOS автоматически устанавливает маршрут узла, также известный как локальный маршрут узла, при настройке адреса интерфейса на маршрутизаторе. Маршрут хоста может быть настроенным вручную статическим маршрутом для направления трафика на определенное целевое устройство, такое как сервер, показанный на рисунке. Для статических маршрутов IPv6 адрес следующего перехода может быть локальным адресом связи соседнего маршрутизатора; однако при использовании локального адреса канала в качестве следующего перехода необходимо указать тип интерфейса и номер интерфейса. Для этого исходный маршрут статического узла IPv6 удаляется, а затем полностью указанный маршрут настраивается с адресом IPv6 сервера и локальным адресом канала IPv6 маршрутизатора ISP.


<!--15.6.4 Контрольная по модулю - Статическая маршрутизация IP-->