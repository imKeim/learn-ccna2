# Практика и контрольная работа модуля

<!-- 7.4.1 -->
## Packet Tracer - реализация DHCPv4
Как специалисту по обслуживанию сетей, вам необходимо настроить маршрутизатор Cisco в качестве сервера DHCP, чтобы обеспечить динамическое распределение адресов для клиентов внутри сети. Также необходимо настроить пограничный маршрутизатор в качестве DHCP-клиента таким образом, чтобы он получал IP-адрес от сети интернет-провайдера. Поскольку сервер централизован, необходимо настроить два маршрутизатора LAN для ретрансляции DHCP-трафика между локальными сетями и маршрутизатором, который выступает в качестве DHCP-сервера.

[Открыть описание в PDF](./assets/7.4.1-packet-tracer---implement-dhcpv4_ru-RU.pdf)

[Скачать файл для Packet Tracer](./assets/7.4.1-packet-tracer---implement-dhcpv4_ru-RU.pka)

<!-- 7.4.2 -->
## Лабораторная работа - Реализация DHCPv4
В этой лабораторной работе вы выполните следующие задачи.

- Часть 1: Создание сети и настройка основных параметров устройства
- Часть 2: Настройка и проверка двух серверов DHCPv4 на R1
- Часть 3: Настройка и проверка DHCP-ретрансляции на R2

[Открыть описание в PDF](./assets/7.4.2-lab---implement-dhcpv4_ru-RU.pdf)

<!-- 7.4.3 -->
## Что я изучил в этом модуле?
**Принципы DHCPv4**

Сервер DHCPv4 динамически назначает или арендует IPv4-адрес клиенту из пула адресов на ограниченный период времени, выбранный сервером, или до тех пор, пока клиент больше не будет нуждаться в адресе. Процесс аренды DHCPv4 начинается с отправки клиентом сообщения с запросом служб DHCP-сервера. Если сервер DHCPv4 получает сообщение, он будет отвечать IPv4 адрес и возможные другие сведения о конфигурации сети. Периодически клиент должен связываться с DHCP-сервером для продления срока аренды. Благодаря подобному механизму «переехавшие» или отключившиеся клиенты не занимают адреса, в которых они больше не нуждаются. Когда клиент загружается (или иным образом хочет присоединиться к сети), он начинает четырехэтапный процесс для получения аренды: DHCPDISCOVER, затем DHCPOFFER, затем DHCPREQUEST и, наконец, DHCPACK. До истечения срока аренды клиент начинает двухэтапный процесс продления аренды с сервером DHCPv4: DHCPREQUEST затем DHCPACK.

**Настройка сервера DHCPv4 в Cisco IOS**

Маршрутизатор Cisco под управлением ОС Cisco IOS можно настроить в качестве DHCPv4-сервера. Для настройки сервера DHCPv4 Cisco IOS выполните следующие действия: исключите адреса IPv4, определите имя пула DHCPv4 и настройте пул DHCPv4. Проверьте конфигурацию с помощью команд **show running-config | section dhcp,show ip dhcp binding** и **show ip dhcp server statistics**. Служба DHCPv4 включена по умолчанию. Для того чтобы отключить службу, введите команду в режиме глобальной конфигурации **no service dhcp**. В сложной иерархической сети корпоративные серверы обычно располагаются в серверной ферме. Данные серверы могут предоставлять службы DHCP, DNS, TFTP и FTP. Клиенты сети и серверы, как правило, находятся в разных подсетях. Для определения местоположения серверов и получения услуг клиенты часто используют сообщения широковещательной рассылки. На рисунке показана попытка PC1 получить IPv4-адрес от DHCP-сервера при помощи сообщения широковещательной рассылки. В этом сценарии маршрутизатор R1 не настроен в качестве DHCPv4-сервера и не отправляет сообщения широковещательной рассылки. Если сервер DHCPv4 находится в другой сети, ПК не может получить IP-адрес с использованием DHCP. Маршрутизатор должен быть настроен на ретрансляцию сообщений DHCPv4 на сервер DHCPv4. Администратор сети сбрасывает всю текущую информацию об IPv4-адресации с помощью команды **ipconfig /release**. Затем администратор сети пытается обновить сведения об адресации IPv4 с помощью команды **ipconfig /renew**. Лучше всего настроить R1 с помощью команды конфигурации **ip helper-address *address interface***. Администратор сети может использовать эту команду **show ip interface** для проверки конфигурации. Теперь ПК может получить адрес IPv4 с сервера DHCPv4, проверенный с помощью команды **ipconfig /all**. По умолчанию команда **ip helper-address** переадресовывает следующие восемь служб UDP:

- Port 37: Время
- Port 49: TACACS
- Port 53: DNS
- Port 67: DHCP/BOOTP server
- Port 68: DHCP/BOOTP client
- Port 69: TFTP
- Port 137: NetBIOS name service
- Port 138: NetBIOS datagram service

**Настройка клиента DHCPv4**

В простейшей конфигурации для соединения с кабельным или DSL-модемом используется Ethernet-интерфейс. Для настройки Ethernet-интерфейса в качестве DHCP-клиента используйте команду режима настройки интерфейса **ip address dhcp interface**. Маршрутизаторы беспроводной связи настраиваются для автоматического получения адресов IPv4 от интернет-провайдера. Тип интернет-соединения установлен на Автоматическая настройка - DHCP. Этот параметр используется, когда маршрутизатор подключен к кабельному или DSL-модему и выступает в качестве DHCPv4-клиента, запрашивая IPv4-адрес у интернет-провайдера.


<!-- 7.4.4 Контрольная по модулю - DHCPv4 -->
